<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Girl Math âœ¨ - Product Scanner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Video Background -->
    <div class="video-background" aria-hidden="true">
        <video autoplay muted loop playsinline>
            <source src="/public/videos/hero-background.mp4" type="video/mp4">
        </video>
        <div class="bg-radial-vignette"></div>
    </div>
    <div class="background-decorations" aria-hidden="true">
        <span class="decor decor-1">âœ¨</span>
        <span class="decor decor-2">ğŸ’–</span>
        <span class="decor decor-3">ğŸ¬</span>
        <span class="decor decor-4">ğŸ€</span>
        <span class="decor decor-5">ğŸ“</span>
        <span class="decor decor-6">â­</span>
        <span class="decor decor-7">ğŸ­</span>
        <span class="decor decor-8">ğŸŒ¸</span>
        <span class="decor decor-9">âœ¨</span>
        <span class="decor decor-10">ğŸ€</span>
        <span class="decor decor-11">ğŸ’–</span>
        <span class="decor decor-12">ğŸ¬</span>
        <span class="decor decor-13">ğŸ“</span>
        <span class="decor decor-14">ğŸ¦‹</span>
        <span class="decor decor-15">ğŸ’«</span>
        <span class="decor decor-16">ğŸ¦</span>
        <span class="decor decor-17">ğŸˆ</span>
        <span class="decor decor-18">ğŸ§</span>
        <span class="decor decor-19">ğŸ€</span>
        <span class="decor decor-20">ğŸŒˆ</span>
        <span class="decor decor-21">ğŸ“</span>
        <span class="decor decor-22">ğŸ’„</span>
        <span class="decor decor-23">ğŸ‘›</span>
        <span class="decor decor-24">ğŸ’</span>
        <span class="decor decor-25">ğŸ’…</span>
        <span class="decor decor-26">ğŸ’–</span>
        <span class="decor decor-27">âœ¨</span>
        <span class="decor decor-28">ğŸ­</span>
        <span class="decor decor-29">ğŸ€</span>
        <span class="decor decor-30">ğŸŒ¸</span>
    </div>
    <div class="container">
        <header>
            <h1 class="title"><span class="sparkle-v" aria-hidden="true">âœ¨</span>Girl Math Scanner <span class="sparkle">âœ¨</span></h1>
            <p class="subtitle">Snap a photo, get a price estimate</p>
            <nav class="tabs-nav" style="margin-top: 15px;">
                <a href="index.html" class="tab-link active">Scanner</a>
                <a href="shop.html" class="tab-link">Shop</a>
                <a href="calculator.html" class="tab-link">Calculator</a>
            </nav>
        </header>

        <div class="calculator-body">
            <!-- Camera Screen -->
            <div class="calculator-screen camera-screen" id="cameraScreen">
                <div class="camera-container" id="cameraContainer">
                    <video id="videoElement" autoplay playsinline style="display: none;"></video>
                    <canvas id="canvasElement" style="display: none;"></canvas>
                    <div class="camera-placeholder" id="cameraPlaceholder">
                        <div class="camera-icon">ğŸ“·</div>
                        <p class="camera-placeholder-text">Snap and Shop</p>
                    </div>
                    <img id="capturedImage" class="captured-image" style="display: none;" alt="Captured product">
                    <div class="camera-controls" id="cameraControls" style="display: none;">
                        <button type="button" class="camera-btn capture-btn" id="captureBtn">Capture</button>
                        <button type="button" class="camera-btn retake-btn" id="retakeBtn" style="display: none;">Retake</button>
                    </div>
                </div>
            </div>

            <!-- Scanner Results Section -->
            <div class="calculator-keypad">
                <div class="keypad-grid">
                    <!-- Loading Indicator -->
                    <div class="keypad-key keypad-key-full" id="loadingIndicator" style="display: none;">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <p class="loading-text">Identifying product...</p>
                        </div>
                    </div>

                    <!-- Error Message -->
                    <div class="keypad-key keypad-key-full" id="errorMessage" style="display: none;">
                        <div class="error-container">
                            <p class="error-text"></p>
                        </div>
                    </div>

                    <!-- Scanner Results Container -->
                    <div class="keypad-key keypad-key-full" id="scannerResults" style="display: none;">
                        <!-- Result Header -->
                        <div class="scanner-result-header" id="resultHeader">
                            <span class="result-header-text">Looks like...</span>
                        </div>

                        <!-- Primary Result (status=ok) -->
                        <div class="scanner-primary-result" id="primaryResult" style="display: none;">
                            <div class="primary-product-name" id="primaryProductName"></div>
                            <div class="primary-price-range" id="primaryPriceRange"></div>
                            <p class="primary-assumptions" id="primaryAssumptions"></p>
                            
                            <!-- Other close matches (expandable) -->
                            <details class="other-matches" id="otherMatches">
                                <summary class="other-matches-summary">Other close matches</summary>
                                <div class="other-matches-list" id="otherMatchesList"></div>
                            </details>
                        </div>

                        <!-- Disambiguation View (status=needs_disambiguation) -->
                        <div class="scanner-disambiguation" id="disambiguationView" style="display: none;">
                            <p class="disambiguation-prompt" id="disambiguationPrompt">Pick the closest match:</p>
                            
                            <!-- Candidate Cards -->
                            <div class="candidate-cards" id="candidateCards"></div>
                            
                            <!-- Quick Pick Options (for phones etc) -->
                            <div class="quick-pick-options" id="quickPickOptions" style="display: none;">
                                <p class="quick-pick-label" id="quickPickLabel"></p>
                                <div class="quick-pick-buttons" id="quickPickButtons"></div>
                            </div>
                            
                            <p class="disambiguation-hint" id="disambiguationHint"></p>
                        </div>

                        <!-- Needs More Info View (status=needs_more_info) -->
                        <div class="scanner-needs-info" id="needsInfoView" style="display: none;">
                            <p class="needs-info-text">ğŸ“¸ Not enough signal from this photo</p>
                            <p class="needs-info-subtext">The image is too blurry or unclear to identify the product confidently.</p>
                            
                            <div class="needs-info-actions">
                                <button type="button" class="action-btn secondary" id="retakePhotoBtn">
                                    ğŸ“· Retake Photo
                                </button>
                                <button type="button" class="action-btn secondary" id="manualCategoryBtn">
                                    ğŸ“ Choose Category Manually
                                </button>
                            </div>
                            
                            <!-- Manual Category Selector -->
                            <div class="manual-category-selector" id="manualCategorySelector" style="display: none;">
                                <label for="manualCategory" class="key-label">Select a category:</label>
                                <select id="manualCategory" class="key-select">
                                    <option value="">Choose...</option>
                                    <option value="phone">ğŸ“± Phone</option>
                                    <option value="jewellery">ğŸ’ Jewelry</option>
                                    <option value="bag">ğŸ‘œ Bag</option>
                                    <option value="shoes">ğŸ‘Ÿ Shoes</option>
                                    <option value="clothes">ğŸ‘— Clothing</option>
                                    <option value="skincare">ğŸ’„ Skincare</option>
                                    <option value="electronics">ğŸ”Œ Electronics</option>
                                    <option value="other">ğŸ’« Other</option>
                                </select>
                                <button type="button" class="action-btn primary" id="submitManualCategory" style="margin-top: 10px;">
                                    Get Price Estimate
                                </button>
                            </div>
                        </div>

                        <!-- Selected Result Display (after user picks) -->
                        <div class="scanner-selected-result" id="selectedResult" style="display: none;">
                            <div class="selected-badge">âœ“ Selected</div>
                            <div class="selected-product-name" id="selectedProductName"></div>
                            <div class="selected-price-range" id="selectedPriceRange"></div>
                            <p class="selected-assumptions" id="selectedAssumptions"></p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="keypad-key keypad-key-full">
                        <div class="results-share">
                            <button type="button" onclick="window.location.reload()" class="action-btn secondary">Start Over</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            Standalone scanner for price estimation. Not connected to Girl Math Calculator.
        </footer>
    </div>
    <script src="scanner.js"></script>
    <script src="camera.js"></script>
    <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>
